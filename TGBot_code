import telebot

# Замените 'YOUR_BOT_TOKEN' на токен вашего бота от BotFather
BOT_TOKEN = '7637039694:AAGPIIqDi-_eAVvkcfGRKFZHvIepbeXxKoE'
GAME_SHORT_NAME = 'mony'  # Замените на короткое имя вашей игры из BotFather

bot = telebot.TeleBot(BOT_TOKEN)

# Команда /start
@bot.message_handler(commands=['start'])
def send_welcome(message):
    bot.send_message(
        message.chat.id,
        "Привет! Я бот с игрой Тетрис. Используй /play, чтобы начать игру!"
    )

# Команда /help
@bot.message_handler(commands=['help'])
def send_help(message):
    bot.send_message(
        message.chat.id,
        "Вот что я умею:\n"
        "/start - Приветствие\n"
        "/help - Список команд\n"
        "/play - Играть в Тетрис"
    )

# Команда /play
@bot.message_handler(commands=['play'])
def send_game(message):
    try:
        bot.send_game(chat_id=message.chat.id, game_short_name=GAME_SHORT_NAME)
    except Exception as e:
        bot.send_message(
            message.chat.id,
            "Произошла ошибка при попытке открыть игру. Убедитесь, что вы настроили игру в BotFather."
        )
        print(e)

# Обработка callback-кнопки для запуска игры
@bot.callback_query_handler(func=lambda call: True)
def callback_inline(call):
    if call.game_short_name == GAME_SHORT_NAME:
        bot.answer_callback_query(callback_query_id=call.id, url=f"https://den5611.github.io/Kurs/")
    else:
        bot.answer_callback_query(callback_query_id=call.id, text="Ошибка: игра не найдена.")

# Запуск бота
if __name__ == "__main__":
    print("Бот запущен...")
    bot.infinity_polling()
